{"version":3,"sources":["js/jquery.ajaxchimp.min.js"],"names":["$","ajaxChimp","responses","translations","init","selector","options","fn","each","i","elem","form","email","find","label","settings","extend","attr","url","replace","concat","submit","msg","successCallback","resp","result","removeClass","addClass","index","parts","split","undefined","parseInt","toString","e","language","html","show","callback","data","dataArray","serializeArray","item","name","value","ajax","success","dataType","error","text","console","log","submitMsg","jQuery"],"mappings":"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","file":"jquery.ajaxchimp.min.7487e381.map","sourceRoot":"..","sourcesContent":["(function ($) {\n    'use strict';\n\n    $.ajaxChimp = {\n        responses: {\n            'We have sent you a confirmation email'                                             : 0,\n            'Please enter a valid email'                                                        : 1,\n            'An email address must contain a single @'                                          : 2,\n            'The domain portion of the email address is invalid (the portion after the @: )'    : 3,\n            'The username portion of the email address is invalid (the portion before the @: )' : 4,\n            'This email address looks fake or invalid. Please enter a real email address'       : 5\n        },\n        translations: {\n            'en': null\n        },\n        init: function (selector, options) {\n            $(selector).ajaxChimp(options);\n        }\n    };\n\n    $.fn.ajaxChimp = function (options) {\n        $(this).each(function(i, elem) {\n            var form = $(elem);\n            var email = form.find('input[type=email]');\n            var label = form.find('.info');\n\n            var settings = $.extend({\n                'url': form.attr('action'),\n                'language': 'en'\n            }, options);\n\n            var url = settings.url.replace('/post?', '/post-json?').concat('&c=?');\n\n            form.attr('novalidate', 'true');\n            email.attr('name', 'EMAIL');\n\n            form.submit(function () {\n                var msg;\n                function successCallback(resp) {\n                    if (resp.result === 'success') {\n                        msg = 'We have sent you a confirmation email';\n                        label.removeClass('error').addClass('valid');\n                        email.removeClass('error').addClass('valid');\n                    } else {\n                        email.removeClass('valid').addClass('error');\n                        label.removeClass('valid').addClass('error');\n                        var index = -1;\n                        try {\n                            var parts = resp.msg.split(' - ', 2);\n                            if (parts[1] === undefined) {\n                                msg = resp.msg;\n                            } else {\n                                var i = parseInt(parts[0], 10);\n                                if (i.toString() === parts[0]) {\n                                    index = parts[0];\n                                    msg = parts[1];\n                                } else {\n                                    index = -1;\n                                    msg = resp.msg;\n                                }\n                            }\n                        }\n                        catch (e) {\n                            index = -1;\n                            msg = resp.msg;\n                        }\n                    }\n\n                    // Translate and display message\n                    if (\n                        settings.language !== 'en'\n                        && $.ajaxChimp.responses[msg] !== undefined\n                        && $.ajaxChimp.translations\n                        && $.ajaxChimp.translations[settings.language]\n                        && $.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]]\n                    ) {\n                        msg = $.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]];\n                    }\n                    label.html(msg);\n\n                    label.show(2000);\n                    if (settings.callback) {\n                        settings.callback(resp);\n                    }\n                }\n\n                var data = {};\n                var dataArray = form.serializeArray();\n                $.each(dataArray, function (index, item) {\n                    data[item.name] = item.value;\n                });\n\n                $.ajax({\n                    url: url,\n                    data: data,\n                    success: successCallback,\n                    dataType: 'jsonp',\n                    error: function (resp, text) {\n                        console.log('mailchimp ajax submit error: ' + text);\n                    }\n                });\n\n                // Translate and display submit message\n                var submitMsg = 'Submitting...';\n                if(\n                    settings.language !== 'en'\n                    && $.ajaxChimp.translations\n                    && $.ajaxChimp.translations[settings.language]\n                    && $.ajaxChimp.translations[settings.language]['submit']\n                ) {\n                    submitMsg = $.ajaxChimp.translations[settings.language]['submit'];\n                }\n                label.html(submitMsg).show(2000);\n\n                return false;\n            });\n        });\n        return this;\n    };\n})(jQuery);"]}